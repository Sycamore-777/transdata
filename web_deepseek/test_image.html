<!DOCTYPE html>
<html>
<head>
    <title>图片加载测试</title>
</head>
<body>
    <h1>图片加载测试</h1>
    
    <h2>直接API调用</h2>
    <img src="http://localhost:5000/api/serve_image?path=test_images/test.png" alt="测试图片" style="border: 1px solid red;">
    
    <h2>JavaScript动态加载</h2>
    <div id="test-container"></div>
    
    <script>
        // 测试JavaScript动态加载
        const container = document.getElementById('test-container');
        
        const img = document.createElement('img');
        img.style.border = '1px solid blue';
        img.onload = function() {
            console.log('图片加载成功:', img.src);
            const info = document.createElement('p');
            info.textContent = '✅ 图片加载成功: ' + img.naturalWidth + 'x' + img.naturalHeight;
            info.style.color = 'green';
            container.appendChild(info);
        };
        img.onerror = function() {
            console.error('图片加载失败:', img.src);
            const info = document.createElement('p');
            info.textContent = '❌ 图片加载失败';
            info.style.color = 'red';
            container.appendChild(info);
        };
        img.src = 'http://localhost:5000/api/serve_image?path=test_images/test.png';
        
        container.appendChild(img);
    </script>
</body>
</html>
